define("tiny_cursive/show_url_in_quiz_detail",["jquery","core/ajax","core/str","core/templates","./replay"],(function($,AJAX,str,templates,Replay){window.myFunction=function(){let mid=$(this).data("id");$("#typeid"+mid).show()},window.video_playback=function(mid,filepath){return""!==filepath?($("#playback"+mid).show(),new Replay(elementId="output_playback_"+mid,filePath=filepath,speed=10,loop=!1,controllerId="player_"+mid)):alert("No submission"),!1},window.popup_item=function(mid){$("#"+mid).show()};var usersTable={init:function(score_setting,showcomment){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendSubmissionDetail(score_setting,showcomment)}))},appendSubmissionDetail:function(score_setting,showcomment){let sub_url=window.location.href,parm=new URL(sub_url),attempt_id=parm.searchParams.get("attempt"),cmid=parm.searchParams.get("cmid");if(!cmid){var firstHref=$('a[href*="/mod/quiz/review.php"]').first().attr("href");firstHref.length>0&&(cmid=firstHref.match(/cmid=(\d+)/)[1])}var userid="";$("table.generaltable.generalbox.quizreviewsummary tbody tr").each((function(){var href=$(this).find('a[href*="/user/view.php"]').attr("href");if(href){var id=href.match(/id=(\d+)/);id&&(userid=id[1])}}));var st="font-size:24px;color:black;border:none";$("#page-mod-quiz-review .info").each((function(){if((editQuestionLink=$(this).find('.editquestion a[href*="question/bank/editquestion/question.php"]')).length>0)var editQuestionLink,questionid=(editQuestionLink=editQuestionLink.attr("href")).match(/&id=(\d+)/)[1];let args={id:attempt_id,modulename:"quiz",cmid:cmid,questionid:questionid,userid:userid},com=AJAX.call([{methodname:"cursive_get_comment_link",args:args}]);return com[0].done((function(json){var data=JSON.parse(json);if(data.data.filename){var html,content=$('.que.essay .editquestion a[href*="question/bank/editquestion/question.php"][href*="&id='+data.data.questionid+'"]');if("comments"!=data.usercomment){content.parent().parent().parent().find(".qtext").append('<div class="dropdown">');var tt="";data.usercomment.forEach((element=>{tt+="<li>"+element.usercomment+"</li>"}));content.parent().parent().parent().find(".qtext").append('<div class="border alert alert-warning"><details><summary>Content Sources Provided by Student</summary> '+tt+"</details></div></div>")}var filepath="";if(data.data.filename)filepath=M.cfg.wwwroot+"/lib/editor/tiny/plugins/cursive/userdata/"+data.data.filename;var score=data.data.score,icon="fa fa-circle-o",color="font-size:24px;color:black";console.log(data.data.first_file),data.data.first_file?(icon="fa  fa fa-solid fa-info-circle typeid",color="font-size:24px;color:#000000"):score>=score_setting?(icon="fa fa-check-circle typeid",color="font-size:24px;color:green"):score<score_setting?(icon="fa fa-question-circle typeid",color="font-size:24px;color:#A9A9A9"):(icon="fa fa-circle-o typeid",color="font-size:24px;color:black"),html='<div class="justify-content-center d-flex"><button onclick="popup_item('+userid+')" data-id='+userid+' class="mr-2 fa fa-area-chart popup_item" style="'+st+'"></button><a href="#" onclick="video_playback('+userid+", '"+filepath+'\')" data-filepath="'+filepath+'" data-id="playback_'+userid+'" class="mr-2 video_playback_icon fa fa-play video_playback" style="'+st+'"></a><button onclick="myFunction()" data-id='+userid+' class="'+icon+' " style="border:none; '+color+';"></button></div>',content.parent().parent().parent().find(".qtext").append(html);var context={tabledata:data.data,page:score_setting,userid:userid};templates.render("tiny_cursive/pop_modal",context).then((function(html){$("body").append(html)})).catch((e=>window.console.log(e)))}})),$(window).on("click",(function(e){e.target.id=="modal-close"+userid&&$("#"+userid).hide(),e.target.id=="modal-close-playback"+userid&&$("#playback"+userid).hide()})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=show_url_in_quiz_detail.min.js.map
